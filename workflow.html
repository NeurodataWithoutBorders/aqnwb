<!-- HTML header for doxygen 1.14.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>aqnwb: Acquiring Data ðŸ“Š</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">var page_layout=1;</script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom-modern.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="side-nav" class="ui-resizable side-nav-resizable"><!-- do not remove this div, it is closed by doxygen! -->
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="aqnwb-logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">aqnwb<span id="projectnumber">&#160;0.1.0</span>
   </div>
  </td>
 </tr>
   <tr><td colspan="2">        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect" class="search-icon" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()"><span class="search-icon-dropdown"></span></span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><div id="MSearchCloseImg" class="close-icon"></div></a>
          </span>
        </div>
</td></tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
</div><!-- top -->
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('workflow.html','',''); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search',true);
});
</script>
<div id="main-nav"></div>
<div id="container"><div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Acquiring Data ðŸ“Š </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1 class="doxsection"><a class="anchor" id="recording_workflow"></a>
Overview of a recording workflow</h1>
<p>For users wanting to integrate NWB with a particular data acquisition software, here we outline the steps for a single recording from file creation to saving.</p>
<ol type="1">
<li>Create the I/O object (e.g,. <a class="el" href="class_a_q_n_w_b_1_1_i_o_1_1_h_d_f5_1_1_h_d_f5_i_o.html">HDF5IO</a>) used for writing data to the file on disk.</li>
<li>Create the <a class="el" href="class_a_q_n_w_b_1_1_n_w_b_1_1_n_w_b_file.html">NWBFile</a> object which represents the NWB file and provides convenience functions for creating NWB file contents.</li>
<li>Create the recording metadata stored in <span class="tt">/general</span> in NWB, e.g., the <br  />
 <a class="el" href="class_a_q_n_w_b_1_1_n_w_b_1_1_electrodes_table.html">ElectrodesTable</a> object used for saving electrodes information.</li>
<li>Create the <a class="el" href="class_a_q_n_w_b_1_1_n_w_b_1_1_registered_type.html">RegisteredType</a> objects (e.g., <a class="el" href="class_a_q_n_w_b_1_1_n_w_b_1_1_electrical_series.html">ElectricalSeries</a>) used for recording.<ul>
<li>Upon creation, the <a class="el" href="class_a_q_n_w_b_1_1_n_w_b_1_1_registered_type.html">RegisteredType</a> objects are automatically registered with the <a class="el" href="class_a_q_n_w_b_1_1_i_o_1_1_recording_objects.html">RecordingObjects</a> object provided by the I/O object for easy access and to facilitate management of the recording process.</li>
</ul>
</li>
<li>Start the recording.</li>
<li>Write data.</li>
<li>Stop the recording and close the <a class="el" href="class_a_q_n_w_b_1_1_n_w_b_1_1_n_w_b_file.html">NWBFile</a>.</li>
</ol>
<p>Below, we walk through these steps in more detail.</p>
<div class="image">
<img src="aqnwb_workflow_and_api.png" alt="" width="800px"/>
<div class="caption">
Overview of the workflow and design of AqNWB.</div></div>
<h2 class="doxsection"><a class="anchor" id="create_io"></a>
1. Create the I/O object</h2>
<p>First, create an I/O object (e.g., <a class="el" href="class_a_q_n_w_b_1_1_i_o_1_1_h_d_f5_1_1_h_d_f5_i_o.html">HDF5IO</a>) used for writing data to the file. AqNWB provides the convenience method, <a class="el" href="namespace_a_q_n_w_b.html#aae4545d930db6f70b4438e0167c500d0">createIO</a> to create this object using one of the supported backends. For more fine-grained control of different backend parameters, you can create your own <span class="tt">std::shared_ptr</span> using any of the derived <a class="el" href="class_a_q_n_w_b_1_1_i_o_1_1_base_i_o.html">BaseIO</a> classes.</p>
<div class="fragment"><div class="line">    std::shared_ptr&lt;BaseIO&gt; io = <a class="code hl_function" href="namespace_a_q_n_w_b.html#aae4545d930db6f70b4438e0167c500d0">createIO</a>(<span class="stringliteral">&quot;HDF5&quot;</span>, path);</div>
<div class="line">    io-&gt;open();</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="create_nwbfile"></a>
2. Create the NWBFile</h2>
<p>Next, constructs the <a class="el" href="class_a_q_n_w_b_1_1_n_w_b_1_1_n_w_b_file.html">NWBFile</a> object, using the I/O object as an input. Then, initialize the object to create the basic file structure of the NWBFile.</p>
<div class="fragment"><div class="line">    <span class="keyword">auto</span> nwbfile = <a class="code hl_function" href="class_a_q_n_w_b_1_1_n_w_b_1_1_n_w_b_file.html#a84f0f21cd7bd9745b1eeb508b747fb4b">NWB::NWBFile::create</a>(io);</div>
<div class="line">    <a class="code hl_typedef" href="_base_i_o_8hpp.html#a38fce1d86c801b13b6860d3346276776">Status</a> initStatus = nwbfile-&gt;initialize(<a class="code hl_function" href="namespace_a_q_n_w_b.html#a7a202ee50288eeca65b9b98370226a82">generateUuid</a>());</div>
<div class="line">    <a class="code hl_function" href="namespace_a_q_n_w_b.html#aa2ae7bd54f7ed396e61e6cec9d208140">AQNWB::checkStatus</a>(initStatus, <span class="stringliteral">&quot;NWBFile initialization&quot;</span>);</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>In AqNWB <span class="tt">neurodata_types</span> in NWB are represented by subclasses of <a class="el" href="class_a_q_n_w_b_1_1_n_w_b_1_1_registered_type.html">RegisteredType</a>. All <a class="el" href="class_a_q_n_w_b_1_1_n_w_b_1_1_registered_type.html">RegisteredType</a> objects (e.g., a <a class="el" href="class_a_q_n_w_b_1_1_n_w_b_1_1_time_series.html">TimeSeries</a>) are constructed via a <span class="tt">create</span> factory method that requires the <span class="tt">path</span> in the file and the <span class="tt">io</span> as input. <br  />
</dd></dl>
<h2 class="doxsection"><a class="anchor" id="create_recmeta"></a>
3. Create the recording metadata</h2>
<h3 class="doxsection"><a class="anchor" id="create_recmeta_ecephys"></a>
Create the extracellular recording metadata</h3>
<p>Next, construct the <a class="el" href="class_a_q_n_w_b_1_1_n_w_b_1_1_electrodes_table.html">ElectrodesTable</a> object, using the <span class="tt">recordingArrays</span> as an input. Note that in many cases, you will be recording from all electrodes detected by the device and this <span class="tt">recordingArrays</span> structure will be the same as is used to create the <a class="el" href="class_a_q_n_w_b_1_1_n_w_b_1_1_electrical_series.html">ElectricalSeries</a>. However in some cases (e.g. when using Neuropixels or multiple probes), you may be recording from a subset of all available electrodes as part of a single <a class="el" href="class_a_q_n_w_b_1_1_n_w_b_1_1_electrical_series.html">ElectricalSeries</a>. In this case, you should create the <a class="el" href="class_a_q_n_w_b_1_1_n_w_b_1_1_electrodes_table.html">ElectrodesTable</a> with all electrodes detected by the acquisition system, not just those being actively recorded from. This approach is critical for mapping information about which <a class="el" href="class_a_q_n_w_b_1_1_n_w_b_1_1_electrical_series.html">ElectricalSeries</a> were recorded from which electrodes.</p>
<div class="fragment"><div class="line">    <span class="keyword">auto</span> elecTable = nwbfile-&gt;createElectrodesTable(mockRecordingArrays);</div>
<div class="line">    <a class="code hl_typedef" href="_base_i_o_8hpp.html#a38fce1d86c801b13b6860d3346276776">Status</a> elecTableStatus = <a class="code hl_function" href="namespace_a_q_n_w_b.html#a09b9a48d0ec26fe72452788634ee12bb">intToStatus</a>(elecTable != <span class="keyword">nullptr</span>);</div>
<div class="line">    <a class="code hl_function" href="namespace_a_q_n_w_b.html#aa2ae7bd54f7ed396e61e6cec9d208140">AQNWB::checkStatus</a>(elecTableStatus, <span class="stringliteral">&quot;ElectrodesTable creation&quot;</span>);</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="create_datasets"></a>
4. Create datasets and add to RecordingObjects</h2>
<p>Next, create the different data types (e.g. <a class="el" href="class_a_q_n_w_b_1_1_n_w_b_1_1_electrical_series.html">ElectricalSeries</a> or other <a class="el" href="class_a_q_n_w_b_1_1_n_w_b_1_1_time_series.html">TimeSeries</a>) that you would like to write data into. After initialization, these objects are added automatically to the <a class="el" href="class_a_q_n_w_b_1_1_i_o_1_1_recording_objects.html">RecordingObjects</a> instance owned by the I/O object so that it can manage access and data writing during the recording process. Once added, ownership of the <a class="el" href="class_a_q_n_w_b_1_1_n_w_b_1_1_registered_type.html">RegisteredType</a> is transferred to the <a class="el" href="class_a_q_n_w_b_1_1_i_o_1_1_recording_objects.html">RecordingObjects</a> object, so that we can access it again via its index. New containers will always be appended to the end of the private member <a class="el" href="class_a_q_n_w_b_1_1_i_o_1_1_recording_objects.html#a126b61632139fc46327c9f624605f4f2">RecordingObjects::m_recording_objects</a> object.</p>
<div class="fragment"><div class="line">    std::vector&lt;SizeType&gt; containerIndexes = {};</div>
<div class="line">    <a class="code hl_typedef" href="_base_i_o_8hpp.html#a38fce1d86c801b13b6860d3346276776">Status</a> elecSeriesStatus =</div>
<div class="line">        nwbfile-&gt;createElectricalSeries(mockRecordingArrays,</div>
<div class="line">                                        mockChannelNames,</div>
<div class="line">                                        BaseDataType::I16,</div>
<div class="line">                                        containerIndexes);</div>
<div class="line">    <a class="code hl_function" href="namespace_a_q_n_w_b.html#aa2ae7bd54f7ed396e61e6cec9d208140">AQNWB::checkStatus</a>(elecSeriesStatus, <span class="stringliteral">&quot;ElectricalSeries creation&quot;</span>);</div>
</div><!-- fragment --><p>We can check the contents of our <a class="el" href="class_a_q_n_w_b_1_1_i_o_1_1_recording_objects.html">RecordingObjects</a> to confirm:</p>
<div class="fragment"><div class="line">    <span class="comment">// RecordingObjects are now automatically managed by the IO object</span></div>
<div class="line">    <span class="keyword">auto</span> recordingObjects = io-&gt;getRecordingObjects();</div>
<div class="line">    std::cout &lt;&lt; recordingObjects-&gt;toString() &lt;&lt; std::endl;</div>
</div><!-- fragment --><p><b>Output:</b> </p><div class="fragment"><div class="line">RecordingObjects contents:</div>
<div class="line">Index = 0; Type = core::NWBFile; Path = /; </div>
<div class="line">Index = 1; Type = hdmf-common::ElementIdentifiers; Path = /general/extracellular_ephys/electrodes/id; </div>
<div class="line">Index = 2; Type = hdmf-common::VectorData; Path = /general/extracellular_ephys/electrodes/group_name; </div>
<div class="line">Index = 3; Type = hdmf-common::VectorData; Path = /general/extracellular_ephys/electrodes/location; </div>
<div class="line">Index = 4; Type = core::DynamicTable; Path = /general/extracellular_ephys/electrodes; </div>
<div class="line">Index = 5; Type = core::Device; Path = /general/devices/array0; </div>
<div class="line">Index = 6; Type = core::ElectrodeGroup; Path = /general/extracellular_ephys/array0; </div>
<div class="line">Index = 7; Type = core::Device; Path = /general/devices/array1; </div>
<div class="line">Index = 8; Type = core::ElectrodeGroup; Path = /general/extracellular_ephys/array1; </div>
<div class="line">Index = 9; Type = hdmf-common::VectorData; Path = /general/extracellular_ephys/electrodes/group; </div>
<div class="line">Index = 10; Type = core::ElectricalSeries; Path = /acquisition/esdata0; </div>
<div class="line">Index = 11; Type = core::ElectricalSeries; Path = /acquisition/esdata1; </div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>Registration with the <a class="el" href="class_a_q_n_w_b_1_1_i_o_1_1_recording_objects.html">RecordingObjects</a> of the I/O occurs when a <a class="el" href="class_a_q_n_w_b_1_1_n_w_b_1_1_registered_type.html">RegisteredType</a> is being created via the static <a class="el" href="class_a_q_n_w_b_1_1_n_w_b_1_1_registered_type.html#a6f7d3d6d30763215c823452176ed876a">RegisteredType::create</a> factory methods.</dd></dl>
<h2 class="doxsection"><a class="anchor" id="start_recording"></a>
5. Start the recording.</h2>
<p>Then, start the recording process with a call to the <span class="tt">startRecording</span> function of the I/O object.</p>
<div class="fragment"><div class="line">    <a class="code hl_typedef" href="_base_i_o_8hpp.html#a38fce1d86c801b13b6860d3346276776">Status</a> startRecordingStatus = io-&gt;startRecording();</div>
<div class="line">    <a class="code hl_function" href="namespace_a_q_n_w_b.html#aa2ae7bd54f7ed396e61e6cec9d208140">AQNWB::checkStatus</a>(startRecordingStatus, <span class="stringliteral">&quot;Start recording&quot;</span>);</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>When using <a class="el" href="class_a_q_n_w_b_1_1_i_o_1_1_h_d_f5_1_1_h_d_f5_i_o.html">HDF5IO</a> for writing to HDF5, calling <a class="el" href="class_a_q_n_w_b_1_1_i_o_1_1_h_d_f5_1_1_h_d_f5_i_o.html#a8606979d328123bb7bd8efa9df85c6df">startRecording</a> will by default enable <a class="el" href="hdf5io.html#hdf5io_swmr">SWMR mode</a> to ensure file integrity and support concurrent read. As a result, no additional datasets or groups can be added to the file once a recording has been started unless the file is closed and reopened.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>To ensure that all NWB metadata is consistent when we start the recording process, <a class="el" href="class_a_q_n_w_b_1_1_i_o_1_1_base_i_o.html#abaa22a360d8127335bbbf966dbd3f1c6">startRecording</a> also calls <a class="el" href="class_a_q_n_w_b_1_1_i_o_1_1_recording_objects.html#ac5ca7864886ec0547a83bde8efcf0ac0">RecordingObjects::finalize</a> to finalize all our <a class="el" href="class_a_q_n_w_b_1_1_n_w_b_1_1_registered_type.html">RegisteredType</a> objects.</dd></dl>
<h2 class="doxsection"><a class="anchor" id="write_data"></a>
6. Write data.</h2>
<p>During the recording process, use the <a class="el" href="class_a_q_n_w_b_1_1_i_o_1_1_recording_objects.html">RecordingObjects</a> as an interface to access the various <a class="el" href="class_a_q_n_w_b_1_1_n_w_b_1_1_container.html">Container</a> object and corresponding datasets and write blocks of data to the file. Calling <span class="tt">flush()</span> on the I/O object at any time will ensure the data is moved to disk.</p>
<div class="fragment"><div class="line">          <a class="code hl_function" href="namespace_a_q_n_w_b_1_1_i_o.html#acb284d332fd23c82aa8e8311dd31d319">IO::writeTimeseriesData</a>(recordingObjects,</div>
<div class="line">                                  containerIndexes[i],</div>
<div class="line">                                  channel,</div>
<div class="line">                                  dataShape,</div>
<div class="line">                                  positionOffset,</div>
<div class="line">                                  intBuffer.get(),</div>
<div class="line">                                  timestampsBuffer.data());</div>
<div class="line">          io-&gt;flush();</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>We should always reuse the existing objects that are cached in <a class="el" href="class_a_q_n_w_b_1_1_i_o_1_1_recording_objects.html">RecordingObjects</a>. Calling for example <span class="tt">ElectricalSeries::create("/acquisition/esdata0", io)</span> multiple times for the same I/O and path will result in the creation and registration of effectively duplicate objects that attempt to access (and potentially modify) the same objects in the NWB file, hence, leading to potentially unintended interactions, e.g., one object overwriting changes of the other.</dd></dl>
<h2 class="doxsection"><a class="anchor" id="stop_recording"></a>
7. Stop the recording and finalize the file.</h2>
<p>When the recording process is finished, call <span class="tt">stopRecording</span> from the I/O object to flush any data and close the file.</p>
<div class="fragment"><div class="line">    io-&gt;stopRecording();</div>
<div class="line">    io-&gt;close();</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>To ensure that all NWB metadata is consistent after we complete the recording process, <a class="el" href="class_a_q_n_w_b_1_1_i_o_1_1_base_i_o.html#a53a279ee9e1adf0d52d03185311ad91a">stopRecording</a> also calls <a class="el" href="class_a_q_n_w_b_1_1_i_o_1_1_recording_objects.html#ac5ca7864886ec0547a83bde8efcf0ac0">RecordingObjects::finalize</a> again.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>If we do not use the <a class="el" href="class_a_q_n_w_b_1_1_i_o_1_1_base_i_o.html#abaa22a360d8127335bbbf966dbd3f1c6">startRecording</a> and <a class="el" href="class_a_q_n_w_b_1_1_i_o_1_1_base_i_o.html#a53a279ee9e1adf0d52d03185311ad91a">stopRecording</a> functions to create an NWBFile then we need to make sure to manually call <a class="el" href="class_a_q_n_w_b_1_1_i_o_1_1_recording_objects.html#ac5ca7864886ec0547a83bde8efcf0ac0">RecordingObjects::finalize</a> before we close the I/O to make sure file contents are finalized correctly.</dd></dl>
<h1 class="doxsection"><a class="anchor" id="advanced_recording_workflow"></a>
Advanced: Recording individual datasets</h1>
<p>In the above workflow we used utility methods, e.g., <a class="el" href="namespace_a_q_n_w_b_1_1_i_o.html#acb284d332fd23c82aa8e8311dd31d319">writeTimeseriesData</a> to ensure data is being recorded in a consistent manner such that data and timestamps are both updated at the same time to ensure the recording is consistent. For finer-grained control to record into individual datasets directly, we can use the corresponding record methods, e.g., <a class="el" href="class_a_q_n_w_b_1_1_n_w_b_1_1_time_series.html#a97d9f3aa32ab004532f45222dcd320e0">TimeSeries.recordData</a> to retrieve the <a class="el" href="class_a_q_n_w_b_1_1_i_o_1_1_base_recording_data.html">BaseRecordingData</a> object for writing data to the datasets. The <a class="el" href="class_a_q_n_w_b_1_1_i_o_1_1_base_recording_data.html">BaseRecordingData</a> objects for all datasets that belong to a recording object are cached by the <a class="el" href="class_a_q_n_w_b_1_1_n_w_b_1_1_registered_type.html">RegisteredType</a> base class to ensure that the current state of the recording process (e.g., the <a class="el" href="class_a_q_n_w_b_1_1_i_o_1_1_base_recording_data.html#a8d653c0bc1e4dd5aa4b9f949d4368a78">position</a>) are stored. With this we can manually write individual data blocks ourselves while ensuring continuation of the recording process:</p>
<div class="fragment"><div class="line">    <span class="comment">// Get the ElectricalSeries container</span></div>
<div class="line">    <span class="keyword">auto</span> container0 = recordingObjects-&gt;getRecordingObject(containerIndexes[0]);</div>
<div class="line">    <span class="keyword">auto</span> electricalSeries0 =</div>
<div class="line">        std::dynamic_pointer_cast&lt;NWB::ElectricalSeries&gt;(container0);</div>
<div class="line">    <span class="comment">// Get the BaseRecordingData object for updating the data and timestamps</span></div>
<div class="line">    <span class="keyword">auto</span> recordingData0 = electricalSeries0-&gt;recordData();</div>
<div class="line">    <span class="keyword">auto</span> timestampsData0 = electricalSeries0-&gt;recordTimestamps();</div>
<div class="line">    <span class="comment">// Manually write timestamps and data to the file</span></div>
<div class="line">    <a class="code hl_typedef" href="_base_i_o_8hpp.html#a38fce1d86c801b13b6860d3346276776">Status</a> writeDataStatus =</div>
<div class="line">        recordingData0-&gt;writeDataBlock({bufferSize, 1},</div>
<div class="line">                                       {samplesRecorded, 0},</div>
<div class="line">                                       BaseDataType::I16,</div>
<div class="line">                                       dataBuffer.data());</div>
<div class="line">    <a class="code hl_typedef" href="_base_i_o_8hpp.html#a38fce1d86c801b13b6860d3346276776">Status</a> writeTimestampsStatus =</div>
<div class="line">        timestampsData0-&gt;writeDataBlock({bufferSize},</div>
<div class="line">                                        {samplesRecorded},</div>
<div class="line">                                        BaseDataType::F64,</div>
<div class="line">                                        timestampsBuffer.data());</div>
<div class="line">    <a class="code hl_function" href="namespace_a_q_n_w_b.html#aa2ae7bd54f7ed396e61e6cec9d208140">AQNWB::checkStatus</a>(writeDataStatus, <span class="stringliteral">&quot;Write data&quot;</span>);</div>
<div class="line">    <a class="code hl_function" href="namespace_a_q_n_w_b.html#aa2ae7bd54f7ed396e61e6cec9d208140">AQNWB::checkStatus</a>(writeTimestampsStatus, <span class="stringliteral">&quot;Write timestamps&quot;</span>);</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="advanced_recording_workflow_reset"></a>
Resetting the recording position</h2>
<p>If we want to clear the recording cache, we can do so by calling <a class="el" href="class_a_q_n_w_b_1_1_n_w_b_1_1_registered_type.html#ab63d3505ee5b5f1c949cb042c7f2deeb">electricalSeries0-&gt;clearRecordingDataCache()</a>. In this case the cached <a class="el" href="class_a_q_n_w_b_1_1_i_o_1_1_base_recording_data.html">BaseRecordingData</a> object will be deleted, such that the next time we request it, a new <a class="el" href="class_a_q_n_w_b_1_1_i_o_1_1_base_recording_data.html">BaseRecordingData</a> object will be constructed that will then start again writing values from the beginning of the dataset. If we want to clear the <a class="el" href="class_a_q_n_w_b_1_1_i_o_1_1_base_recording_data.html">BaseRecordingData</a> object for a single datasets, we can set <span class="tt">reset=true</span> when retrieving the <a class="el" href="class_a_q_n_w_b_1_1_i_o_1_1_base_recording_data.html">BaseRecordingData</a> object (e.g., via <a class="el" href="class_a_q_n_w_b_1_1_n_w_b_1_1_time_series.html#a97d9f3aa32ab004532f45222dcd320e0">auto dataRecorder = electricalSeries0-&gt;recordData(true)</a>) </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="userdocs.html">For Users</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
